def stream_strategy_generator(sample_drs, sample_strat, target_drs):
    # --- 1. Send HTML Header so the browser knows how to style the incoming stream ---
    yield """
    <html>
    <head>
        <style>
            body { font-family: sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
            .status-update { background: #e3f2fd; padding: 10px; border-left: 4px solid #2196f3; margin: 10px 0; }
            .status-success { background: #e8f5e9; padding: 10px; border-left: 4px solid #4caf50; margin: 10px 0; }
            .outline-list { background: #f5f5f5; padding: 15px 30px; border-radius: 4px; }
            .section-block { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
            .section-block h3 { margin-top: 0; color: #6200ea; }
            .content { white-space: pre-wrap; }
            #download-btn { display: none; background: #6200ea; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; margin-top: 20px; cursor: pointer; }
        </style>
    </head>
    <body>
        <h2>Generating Test Strategy...</h2>
        <button id="download-btn" onclick="downloadFile()">Download Full Strategy (.md)</button>
        <div id="stream-container">
    """
    
    # ... (Rest of the Logic: Outline, Loop, etc.) ...
    
    # --- End of function ---
    yield """
        </div>
        <script>
            function downloadFile() {
                const content = document.getElementById('final-raw-content').innerText;
                const blob = new Blob([content], { type: 'text/markdown' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'generated_strategy.md';
                document.body.appendChild(a);
                a.click();
            }
            // Scroll to bottom as content arrives
            window.scrollTo(0, document.body.scrollHeight);
        </script>
    </body>
    </html>
    """
